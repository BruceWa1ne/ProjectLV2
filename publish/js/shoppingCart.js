"use strict";function load_data(){for(var t=document.cookie.split(";"),e=0;e<t.length;e++){var n=t[e].split("=");1==e&&(console.log(n),$("#usershow").html(" 尊敬的用户 : "+n[1]+' 欢迎您 ！<a href="javascript:void(0)" onclick="clearCookie()">退出</a>'))}}function clearCookie(){Cookie.get("username"),Cookie.get("password");Cookie.clear(),alert("已退出"),location.reload()}function reload(){location.reload()}var shoppingCart=JSON.parse(localStorage.getItem("shoppingCart"))||[];console.log(shoppingCart);var table=document.querySelector("table");function render(){var e='\t\n\t\t\t\t           <thead>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<th><input class="allCheck" type="checkbox" '+(shoppingCart.every(function(t){return t.isChecked})?"checked":"")+'>&nbsp;&nbsp;&nbsp;全选</th>\n\t\t\t\t\t\t\t\t\t<th colspan="3" class="product-name">商品 (ID) </th>\n\t\t\t\t\t\t\t\t\t<th class="product-price">价格</th>\n\t\t\t\t\t\t\t\t\t<th class="product-quantity">数量</th>\n\t\t\t\t\t\t\t\t\t<th class="product-operate">操作</th>\n\t\t\t\t\t\t\t\t\t<th class="remove-product">删除</th>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t\t<tbody>';shoppingCart.forEach(function(t){e+='\n\t\t\t\t\t<tr class="cart_item">\n\t\t\t\t\t\t            <th scope="row"><input data-id="'+t.goods_id+'" class="singleCheck" '+(t.isChecked?"checked":"")+' type="checkbox"/></th>\n\t\t\t\t\t\t\t\t\t<th scope="row">'+t.goods_id+'</th>\n\t\t\t\t\t\t\t\t\t<td class="product-thumbnail">\n\t\t\t\t\t\t\t\t\t\t<a href="#"><img width="114" height="130" alt="04"\n\t\t\t\t\t\t\t\t\t\t\t\tclass="attachment-shop_thumbnail wp-post-image"\n\t\t\t\t\t\t\t\t\t\t\t\tsrc="'+t.goods_small_logo+'">\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t<td class="product-name" title="'+t.goods_name+'">\n\t\t\t\t\t\t\t\t\t\t<a href="./productDetail.html?id='+t.goods_id+'"><span style="display: inline-block;width: 300px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;">'+t.goods_name+'</span></a>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t<td class="product-price">\n\t\t\t\t\t\t\t\t\t\t<span class="amount">'+t.goods_price+'</span>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t<td class="product-quantity">\n\t\t\t\t\t\t\t\t\t\t<span class="amount">'+t.count+'</span>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t<td class="product-operate">\n                                    <button type="button" class="btn btn-success increase" data-id="'+t.goods_id+'"> + </button >&nbsp;\n\t\t\t\t\t\t\t\t\t<button type="button" data-id="'+t.goods_id+'" class="btn btn-success decrease"> - </button>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t<td class="remove-product">\n\t\t\t\t\t\t\t\t\t\t<a title="Remove this item" class="remove" href="javascript:void(0)">\n\t\t\t\t\t\t\t\t\t\t<span class="icon-close" data-id="'+t.goods_id+'"></span>\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t'}),e+="</tbody>",table.innerHTML=e}function checkIn(){var e=0;shoppingCart.forEach(function(t){t.isChecked&&(e+=t.goods_price*t.count)}),sum.innerHTML="￥"+e,totalSUM.innerHTML="￥"+e}function upDate(){localStorage.setItem("shoppingCart",JSON.stringify(shoppingCart))}render(),renderMini(),miniCheck(),checkIn(),table.onclick=function(e){if("allCheck"===e.target.className&&(shoppingCart.forEach(function(t){t.isChecked=e.target.checked}),render(),checkIn()),"singleCheck"===e.target.className){var n=e.target.getAttribute("data-id");return(t=shoppingCart.find(function(t){return t.goods_id===n})).isChecked=e.target.checked,render(),checkIn(),upDate(),void miniReset()}if(e.target.className.includes("increase")){n=e.target.getAttribute("data-id");return(t=shoppingCart.find(function(t){return t.goods_id===n})).count++,render(),checkIn(),miniCheck(),void upDate()}if(e.target.className.includes("decrease")){var t;n=e.target.getAttribute("data-id");return(t=shoppingCart.find(function(t){return t.goods_id===n})).count--,t.count<=1&&(alert("至少要购买一件商品哦！"),t.count=1),render(),checkIn(),reCount(),void upDate()}if("icon-close"===e.target.className){n=e.target.getAttribute("data-id");console.log(n);var o=shoppingCart.findIndex(function(t){return t.goods_id===n});return shoppingCart.splice(o,1),render(),checkIn(),upDate(),void reCount()}};